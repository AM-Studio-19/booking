<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AM Studio ç·šä¸Šé ç´„</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Noto Serif TC', serif; background-color: #fdfbf7; color: #5d4037; }
    
    .option-card { transition: all 0.2s; border: 2px solid #e5e7eb; }
    .option-card:hover { border-color: #d7ccc8; }
    .option-card.active { border-color: #8d6e63; background-color: #efebe9; color: #3e2723; }
    
    .guest-block { border-left: 4px solid #8d6e63; padding-left: 1rem; margin-bottom: 2rem; }
    
    .spinner {
      border: 3px solid #f3f3f3; border-top: 3px solid #8d6e63; border-radius: 50%;
      width: 24px; height: 24px; animation: spin 1s linear infinite;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    
    .fade-in { animation: fadeIn 0.3s ease-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

    .date-cell.selected { background-color: #8d6e63; color: white; font-weight: bold; }
    .date-cell.has-rule { border-bottom: 2px solid #d97706; }
    
    .status-tab { @apply px-3 py-1 rounded-full text-xs font-bold cursor-pointer transition-colors border; }
    .status-tab.active { @apply bg-[#8d6e63] text-white border-[#8d6e63]; }
    .status-tab.inactive { @apply bg-white text-gray-500 border-gray-200 hover:bg-gray-50; }
  </style>

  <script crossorigin="anonymous" src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script crossorigin="anonymous" src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script crossorigin="anonymous" src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  
  <script crossorigin="anonymous" src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
  <script crossorigin="anonymous" src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
  <script crossorigin="anonymous" src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>

  <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
  <div id="root">
    <div style="height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; color: #8d6e63;">
      <div class="spinner"></div>
      <p id="loading-text">ç³»çµ±å•Ÿå‹•ä¸­...</p>
    </div>
  </div>

  <div id="error-box" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.95); z-index:9999; padding:20px; text-align:center;">
    <div style="max-width:500px; margin:50px auto; border:2px solid #ef4444; padding:20px; background:#fff; border-radius:8px;">
        <h2 style="color:#ef4444; font-size:24px; margin-bottom:10px;">âš ï¸ ç™¼ç”ŸéŒ¯èª¤</h2>
        <p id="error-msg" style="color:#333; margin-bottom:20px; word-break:break-all;"></p>
        <button onclick="location.reload()" style="margin-top:20px; padding:10px 20px; background:#8d6e63; color:white; border:none; border-radius:4px;">é‡æ–°æ•´ç†</button>
    </div>
  </div>

  <script>
    window.onerror = function(msg, url, line) {
      document.getElementById('root').style.display = 'none';
      document.getElementById('error-box').style.display = 'block';
      document.getElementById('error-msg').innerHTML = `<strong>åŸå› ï¼š</strong>${msg}<br><br><small>(${url}:${line})</small>`;
      return false;
    };
  </script>

  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;
    
    // --- Config ---
    const firebaseConfig = {
      apiKey: "AIzaSyCzCXFgd7VrWHyHrM3GILQ2JHzQaa7yoIw",
      authDomain: "amstudio-booking.firebaseapp.com",
      projectId: "amstudio-booking",
      storageBucket: "amstudio-booking.firebasestorage.app",
      messagingSenderId: "197698776484",
      appId: "1:197698776484:web:818beeea66d470bfc36531"
    };
    const LIFF_ID = '2008567948-KGMPJPGe'; 
    const APP_ID = 'booking-system-web';
    const ADMIN_PIN = '1234';
    
    const BANK_INFO = { code: '822 (ä¸­åœ‹ä¿¡è¨—)', account: '1234-5678-9012', name: 'AM Studio', amountPerPerson: 1000 };

    // --- Categories Definition ---
    const MAIN_CATS = ["éœ§çœ‰", "éœ§å”‡"]; // V28: ç§»é™¤ "æ·¡è‰²+éœ§å”‡"
    const SUB_CATS = ["é¦–æ¬¡", "è£œè‰²"];
    const TOUCHUP_SESSIONS = ["ç¬¬ä¸€æ¬¡å›è£œ", "ç¬¬äºŒæ¬¡ä»¥ä¸Š"];

    // --- Init ---
    let db, auth;
    try {
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        db = firebase.firestore();
        auth = firebase.auth();
    } catch (e) { console.error(e); }

    // --- Icons ---
    const Icon = ({ path, size = 20, className="" }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{path}</svg>
    );
    const Icons = {
        map: <><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></>,
        calendar: <><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></>,
        clock: <><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></>,
        user: <><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></>,
        users: <><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></>,
        chevronRight: <path d="m9 18 6-6-6-6"/>,
        chevronLeft: <path d="m15 18-6-6 6-6"/>,
        check: <polyline points="20 6 9 17 4 12"/>,
        settings: <><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></>,
        trash: <><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></>,
        plus: <><line x1="12" x2="12" y1="5" y2="19"/><line x1="5" x2="19" y1="12" y2="12"/></>,
        msg: <><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></>,
        search: <><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></>,
        edit: <><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></>,
        zap: <><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></>,
        tag: <><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></>,
        up: <polyline points="18 15 12 9 6 15"/>,
        down: <polyline points="6 9 12 15 18 9"/>
    };

    const LOCATIONS = [
      { id: 'tainan', name: 'å°å—å·¥ä½œå®¤' },
      { id: 'kaohsiung', name: 'é«˜é›„å·¥ä½œå®¤' }
    ];
    const DEFAULT_SLOTS = ["11:00", "13:00", "15:00", "17:00", "18:30", "å¾®èª¿æ™‚æ®µç”³è«‹"];
    
    const DEFAULT_TEMPLATES = [
        { title: 'é ç´„ç¢ºèª', text: 'æ‚¨å¥½ï¼Œæ‚¨çš„é ç´„å·²ç¢ºèªï¼\næ™‚é–“ï¼š{{date}} {{time}}\nåœ°é»ï¼š{{location}}\næœå‹™ï¼š{{service}}\næœŸå¾…æ‚¨çš„å…‰è‡¨ã€‚' },
        { title: 'è¨‚é‡‘å‚¬æ”¶', text: 'æ‚¨å¥½ï¼Œæé†’æ‚¨å°šæœªæ”¯ä»˜è¨‚é‡‘ã€‚\nè«‹åŒ¯æ¬¾è‡³ï¼š822 (ä¸­åœ‹ä¿¡è¨—) 1234-5678-9012\né‡‘é¡ï¼š$1000\nåŒ¯æ¬¾å¾Œè«‹è‡³æŸ¥è©¢é é¢å›å ±ï¼Œè¬è¬ï¼' },
        { title: 'å·²æ”¶è¨‚é‡‘', text: 'æ‚¨å¥½ï¼Œå·²æ”¶åˆ°æ‚¨çš„è¨‚é‡‘åŒ¯æ¬¾ï¼Œé ç´„æ­£å¼ä¿ç•™ã€‚æ„Ÿè¬æ‚¨ï¼' },
        { title: 'é ç´„å–æ¶ˆ', text: 'æ‚¨å¥½ï¼Œæ‚¨çš„é ç´„å·²å–æ¶ˆã€‚è‹¥æœ‰éœ€è¦è«‹å†æ¬¡é ç´„ï¼Œè¬è¬ã€‚' }
    ];

    // --- Components ---
    
    const ServiceSelector = ({ services, onSelect }) => {
        const [stage, setStage] = useState('main'); 
        const [mainCat, setMainCat] = useState(null);
        const [subCat, setSubCat] = useState(null);
        const [session, setSession] = useState(null);
        
        // V28: çƒå”‡æ·¡è‰²é–‹é—œ
        const [isDarkLip, setIsDarkLip] = useState(false);

        // Filter services for display logic
        const currentServices = useMemo(() => {
            return services.sort((a, b) => (a.order || 999) - (b.order || 999));
        }, [services]);

        const handleMain = (c) => { setMainCat(c); setStage('sub'); };
        const handleSub = (t) => { 
            setSubCat(t); 
            if(t === 'è£œè‰²') setStage('session');
            else {
                // V28: é¦–æ¬¡é ç´„ï¼Œé¡¯ç¤ºç¢ºèªé é¢ (è™•ç†çƒå”‡)
                setStage('confirm');
            }
        };
        const handleSession = (s) => {
            setSession(s);
            setStage('time');
        };
        const handleTime = (timeRange) => {
            const target = currentServices.find(s => 
                s.category === mainCat && 
                s.type === subCat && 
                s.session === session && 
                s.timeRange === timeRange
            );
            if(target) onSelect(target); else alert('å°šæœªè¨­å®šæ­¤æ™‚æ®µçš„è£œè‰²åƒ¹æ ¼');
        };
        
        const handleConfirmFirst = () => {
             const target = currentServices.find(s => s.category === mainCat && s.type === subCat);
             if(target) {
                 // V28: è‹¥å‹¾é¸çƒå”‡ï¼Œå‹•æ…‹ä¿®æ”¹åƒ¹æ ¼èˆ‡åç¨±
                 let finalService = { ...target };
                 if (mainCat === 'éœ§å”‡' && isDarkLip) {
                     finalService.name += ' (å«çƒå”‡æ·¡è‰²)';
                     finalService.price += 1300;
                     finalService.isDarkLip = true; // æ¨™è¨˜
                 }
                 onSelect(finalService);
             } else {
                 alert('æŸ¥ç„¡æ­¤æœå‹™è³‡æ–™');
             }
        };

        const BackBtn = () => (
            <button onClick={()=>{
                if(stage==='confirm') setStage('sub');
                else if(stage==='time') setStage('session');
                else if(stage==='session') setStage('sub');
                else if(stage==='sub') setStage('main');
            }} className="mb-2 text-sm text-[#8d6e63] flex items-center gap-1">
                <Icon path={Icons.chevronLeft} size={16}/> ä¸Šä¸€æ­¥
            </button>
        );

        // 1. å¤§åˆ†é¡
        if(stage === 'main') return (
            <div className="grid gap-2 animate-fade-in">
                {MAIN_CATS.map(c => <button key={c} onClick={()=>handleMain(c)} className="p-4 border rounded-xl text-left font-bold hover:bg-[#efebe9] hover:border-[#8d6e63] bg-white transition-all">{c}</button>)}
            </div>
        );
        // 2. é¦–æ¬¡/è£œè‰²
        if(stage === 'sub') return (
            <div className="animate-fade-in">
                <BackBtn/>
                <h3 className="font-bold mb-2">{mainCat} - é¸æ“‡é¡å‹</h3>
                <div className="grid gap-2">
                    {SUB_CATS.map(t => <button key={t} onClick={()=>handleSub(t)} className="p-4 border rounded-xl text-left hover:bg-[#efebe9] hover:border-[#8d6e63] bg-white transition-all">{t}</button>)}
                </div>
            </div>
        );
        
        // V28: é¦–æ¬¡é ç´„ç¢ºèªé  (è™•ç†çƒå”‡)
        if(stage === 'confirm') {
            return (
                <div className="animate-fade-in">
                    <BackBtn/>
                    <h3 className="font-bold mb-4">{mainCat} - {subCat}</h3>
                    
                    {/* çƒå”‡é¸é …åªåœ¨éœ§å”‡é¦–æ¬¡å‡ºç¾ */}
                    {mainCat === 'éœ§å”‡' && subCat === 'é¦–æ¬¡' && (
                        <div className="mb-4 p-4 bg-white border border-[#d7ccc8] rounded-xl">
                            <label className="flex items-center gap-3 cursor-pointer">
                                <input type="checkbox" className="w-5 h-5 accent-[#8d6e63]" checked={isDarkLip} onChange={e=>setIsDarkLip(e.target.checked)} />
                                <div>
                                    <div className="font-bold text-[#5d4037]">éœ€è¦çƒå”‡/æ·¡è‰²è™•ç†ï¼Ÿ</div>
                                    <div className="text-xs text-gray-500">è‹¥å”‡è‰²è¼ƒæ·±æˆ–æš—æ²ˆï¼Œéœ€å…ˆé€²è¡Œæ·¡è‰²è™•ç† (+$1300)</div>
                                </div>
                            </label>
                        </div>
                    )}
                    
                    <button onClick={handleConfirmFirst} className="w-full bg-[#8d6e63] text-white py-3 rounded-xl shadow-lg">ç¢ºèªé¸æ“‡</button>
                </div>
            )
        }

        // 3. è£œè‰² - ç¬¬å¹¾æ¬¡
        if(stage === 'session') return (
            <div className="animate-fade-in">
                <BackBtn/>
                <h3 className="font-bold mb-2">{mainCat} - è£œè‰²æ¬¡æ•¸</h3>
                <div className="grid gap-2">
                    {TOUCHUP_SESSIONS.map(s => <button key={s} onClick={()=>handleSession(s)} className="p-4 border rounded-xl text-left hover:bg-[#efebe9] hover:border-[#8d6e63] bg-white transition-all">{s}</button>)}
                </div>
            </div>
        );
        // 4. è£œè‰² - æ™‚é–“å€é–“
        if(stage === 'time') {
            const availableRanges = currentServices
                .filter(s => s.category === mainCat && s.type === 'è£œè‰²' && s.session === session)
                .map(s => s.timeRange)
                .filter((v, i, a) => a.indexOf(v) === i); 

            return (
                <div className="animate-fade-in">
                    <BackBtn/>
                    <h3 className="font-bold mb-2">{mainCat} - {session} - æ™‚é–“</h3>
                    <div className="grid gap-2">
                        {availableRanges.length > 0 ? availableRanges.map(tr => (
                            <button key={tr} onClick={()=>handleTime(tr)} className="p-4 border rounded-xl text-left hover:bg-[#efebe9] hover:border-[#8d6e63] bg-white transition-all">
                                {tr}
                            </button>
                        )) : <div className="text-gray-400 text-sm">å°šç„¡è¨­å®šæ­¤é …ç›®çš„æ™‚é–“å€é–“åƒ¹æ ¼</div>}
                    </div>
                </div>
            );
        }
    };

    const StatusCheck = ({ user, onBack }) => {
        const [phone, setPhone] = useState('');
        const [results, setResults] = useState([]);
        const [loading, setLoading] = useState(false);
        const [reportId, setReportId] = useState(null);
        const [last5, setLast5] = useState('');

        const search = async () => {
            if(!phone) return alert("è«‹è¼¸å…¥é›»è©±è™Ÿç¢¼");
            setLoading(true);
            try {
                const snap = await db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('bookings')
                    .where('customerPhone', '==', phone).get();
                if (snap.empty) {
                    alert("æŸ¥ç„¡æ­¤é›»è©±çš„é ç´„è³‡æ–™"); setResults([]);
                } else {
                    const data = snap.docs.map(d=>({id:d.id, ...d.data()}));
                    data.sort((a,b) => new Date(b.date) - new Date(a.date));
                    setResults(data);
                }
            } catch(e) { alert("æŸ¥è©¢ç™¼ç”ŸéŒ¯èª¤: " + e.message); }
            setLoading(false);
        };

        const submitPayment = async () => {
            if(!last5) return alert('è«‹è¼¸å…¥å¾Œäº”ç¢¼');
            await db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('bookings').doc(reportId).update({
                paymentStatus: 'reported', paymentInfo: { last5, at: new Date().toISOString() }
            });
            alert('å›å ±æˆåŠŸï¼ç­‰å¾…åº—å®¶ç¢ºèªã€‚'); setReportId(null); search();
        };

        return (
            <div className="min-h-screen bg-[#f4f1ea] p-4">
                <div className="bg-white p-4 rounded-xl shadow-sm mb-4">
                    <h2 className="font-bold text-lg mb-4 text-[#4e342e]">é ç´„æŸ¥è©¢ / åŒ¯æ¬¾å›å ±</h2>
                    <div className="flex gap-2">
                        <input className="flex-1 p-2 border rounded-lg" placeholder="è«‹è¼¸å…¥é ç´„é›»è©±" value={phone} onChange={e=>setPhone(e.target.value)} />
                        <button onClick={search} className="bg-[#8d6e63] text-white px-4 rounded-lg">{loading?'...':'æŸ¥è©¢'}</button>
                    </div>
                </div>
                <div className="space-y-3">
                    {results.map(r => (
                        <div key={r.id} className="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
                            <div className="flex justify-between mb-2">
                                <span className="font-bold text-[#8d6e63]">{r.date} {r.time}</span>
                                <span className={`text-xs px-2 py-1 rounded ${r.status==='confirmed'?'bg-green-100 text-green-700':r.status==='cancelled'?'bg-red-100 text-red-700':'bg-yellow-100 text-yellow-700'}`}>{r.status==='confirmed'?'âœ… æˆåŠŸ':r.status==='cancelled'?'âŒ å–æ¶ˆ':'â³ å¾…ç¢ºèª'}</span>
                            </div>
                            <div className="text-sm text-gray-600 mb-2">{r.serviceName} {r.guestIndex && `(ç¬¬${r.guestIndex}ä½)`}</div>
                            <div className="text-sm font-bold text-[#5d4037] mb-2">
                                è¨‚é‡‘ï¼š${BANK_INFO.amountPerPerson}
                            </div>
                            <div className="border-t pt-2 flex justify-between items-center mt-2">
                                <span className="text-xs text-gray-500">ç‹€æ…‹ï¼š{r.paymentStatus==='verified' ? <span className="text-green-600 font-bold">å·²å…¥å¸³</span> : r.paymentStatus==='reported' ? <span className="text-blue-600 font-bold">å¯©æ ¸ä¸­</span> : <span className="text-red-500">æœªæ”¯ä»˜</span>}</span>
                                {r.paymentStatus === 'unpaid' && r.status !== 'cancelled' && (<button onClick={()=>setReportId(r.id)} className="text-xs bg-[#8d6e63] text-white px-3 py-1 rounded">å›å ±</button>)}
                            </div>
                            {reportId === r.id && (
                                <div className="mt-3 bg-gray-50 p-3 rounded flex gap-2">
                                    <input className="flex-1 p-1 border rounded text-sm" placeholder="å¸³è™Ÿå¾Œäº”ç¢¼" value={last5} onChange={e=>setLast5(e.target.value)} />
                                    <button onClick={submitPayment} className="bg-blue-600 text-white px-3 text-xs rounded">é€å‡º</button>
                                    <button onClick={()=>setReportId(null)} className="text-gray-400 text-xs">å–æ¶ˆ</button>
                                </div>
                            )}
                        </div>
                    ))}
                </div>
                <button onClick={onBack} className="mt-6 w-full py-3 text-gray-400 text-sm">è¿”å›é¦–é </button>
            </div>
        )
    };

    const AdminLogin = ({ onBack, onLogin }) => {
        const [pin, setPin] = useState('');
        return <div className="min-h-screen flex items-center justify-center bg-[#f4f1ea] p-6"><div className="bg-white p-8 rounded-2xl shadow-xl w-full max-w-sm text-center"><h2 className="text-xl font-bold mb-6 text-[#4e342e]">å¾Œå°ç™»å…¥</h2><input type="password" placeholder="PIN" className="w-full p-4 bg-gray-50 rounded-xl mb-4 text-center text-xl tracking-widest border focus:border-[#8d6e63] outline-none" value={pin} onChange={e=>setPin(e.target.value)} /><div className="grid grid-cols-2 gap-3"><button onClick={onBack} className="py-3 rounded-xl bg-gray-100 text-gray-500">å–æ¶ˆ</button><button onClick={()=>pin===ADMIN_PIN?onLogin():alert('å¯†ç¢¼éŒ¯èª¤')} className="py-3 rounded-xl bg-[#8d6e63] text-white font-bold">ç™»å…¥</button></div></div></div>;
    }

    const AdminPanel = ({ user, settings, onBack, services, addons, discounts }) => {
        const [tab, setTab] = useState('book');
        // Booking Filter Status
        const [filterStatus, setFilterStatus] = useState('all'); 

        const [books, setBooks] = useState([]);
        const [editDates, setEditDates] = useState({kaohsiung:'', tainan:''});
        const [editSlots, setEditSlots] = useState({kaohsiung:'', tainan:''});
        const [selectedDay, setSelectedDay] = useState(null);
        const [daySlots, setDaySlots] = useState('');
        const [msgModal, setMsgModal] = useState(null); 
        const [templates, setTemplates] = useState(DEFAULT_TEMPLATES);
        const [editMode, setEditMode] = useState(false); 

        const [newSvc, setNewSvc] = useState({ cat: MAIN_CATS[0], type: SUB_CATS[0], session: TOUCHUP_SESSIONS[0], timeRange: '', price: '', duration: '90' });
        
        const [newDiscName, setNewDiscName] = useState('');
        const [newDiscAmount, setNewDiscAmount] = useState('200');

        useEffect(() => {
            if(settings.kaohsiung) {
                setEditDates(p => ({...p, kaohsiung: settings.kaohsiung.allowedDates?.join(',') || ''}));
                setEditSlots(p => ({...p, kaohsiung: settings.kaohsiung.timeSlots?.join(',') || ''}));
            }
            if(settings.tainan) {
                setEditDates(p => ({...p, tainan: settings.tainan.allowedDates?.join(',') || ''}));
                setEditSlots(p => ({...p, tainan: settings.tainan.timeSlots?.join(',') || ''}));
            }
            if(settings.templates) setTemplates(settings.templates);
        }, [settings]);

        useEffect(() => {
            db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('bookings')
              .orderBy('date', 'desc').limit(50).onSnapshot(s => setBooks(s.docs.map(d=>({id:d.id, ...d.data()}))));
        }, []);

        // Service Reordering
        const moveService = async (index, direction) => {
            const sorted = [...services].sort((a, b) => (a.order || 999) - (b.order || 999));
            if (direction === 'up' && index > 0) {
                const temp = sorted[index].order || index;
                sorted[index].order = sorted[index-1].order || (index-1);
                sorted[index-1].order = temp;
                await db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('services').doc(sorted[index].id).update({order: sorted[index].order});
                await db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('services').doc(sorted[index-1].id).update({order: sorted[index-1].order});
            } else if (direction === 'down' && index < sorted.length - 1) {
                const temp = sorted[index].order || index;
                sorted[index].order = sorted[index+1].order || (index+1);
                sorted[index+1].order = temp;
                await db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('services').doc(sorted[index].id).update({order: sorted[index].order});
                await db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('services').doc(sorted[index+1].id).update({order: sorted[index+1].order});
            }
        };

        const handleDateClick = (locId, dStr) => {
            if (editMode) {
                setSelectedDay({ locId, date: dStr });
                const special = settings[locId]?.specialRules?.[dStr];
                setDaySlots(special ? special.join(',') : '');
            } else {
                const current = editDates[locId].split(',').filter(x=>x);
                const set = new Set(current);
                if(set.has(dStr)) set.delete(dStr); else set.add(dStr);
                setEditDates({...editDates, [locId]: Array.from(set).sort().join(',')});
            }
        };

        const saveSettings = async (locId) => {
            const data = {
                allowedDates: editDates[locId].split(',').filter(x=>x),
                timeSlots: editSlots[locId].split(',').filter(x=>x),
                specialRules: settings[locId]?.specialRules || {}
            };
            await db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('settings').doc(locId).set(data);
            alert('è¨­å®šå·²å„²å­˜');
        };

        const saveDayRule = async () => {
            if(!selectedDay) return;
            const { locId, date } = selectedDay;
            const currentRules = settings[locId]?.specialRules || {};
            if (!daySlots.trim()) delete currentRules[date]; else currentRules[date] = daySlots.split(',').map(x=>x.trim()).filter(x=>x);
            await db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('settings').doc(locId).update({ specialRules: currentRules });
            alert(`${date} çš„ç‰¹æ®Šæ™‚æ®µå·²å„²å­˜ï¼`); setSelectedDay(null);
        };

        const copyDefaultSlots = (locId) => {
            setDaySlots(editSlots[locId]);
        }

        const saveTemplates = async () => {
            await db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('settings').doc('templates').set({ templates });
            alert('è¨Šæ¯ç¯„æœ¬å·²å„²å­˜');
        };

        const sendTemplateMsg = async (tpl) => {
            if(!msgModal) return;
            const b = msgModal;
            let text = tpl.text.replace('{{date}}', b.date).replace('{{time}}', b.time).replace('{{location}}', b.locationName).replace('{{service}}', b.serviceName);
            if (window.liff?.isInClient()) { await window.liff.sendMessages([{type:'text', text}]); alert('è¨Šæ¯å·²å‚³é€'); } 
            else { navigator.clipboard.writeText(text); alert('å·²è¤‡è£½è¨Šæ¯ï¼Œè«‹è²¼ä¸Šçµ¦é¡§å®¢'); }
            setMsgModal(null);
        };

        const submitSvcV26 = async () => {
            if(!newSvc.price) return;
            
            let fullName = `${newSvc.cat} - ${newSvc.type}`;
            if(newSvc.type === 'è£œè‰²') {
                fullName += ` (${newSvc.session} - ${newSvc.timeRange})`;
            }
            
            const maxOrder = services.reduce((max, s) => Math.max(max, s.order || 0), 0);

            await db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('services').add({
                name: fullName,
                category: newSvc.cat,
                type: newSvc.type,
                session: newSvc.type === 'è£œè‰²' ? newSvc.session : null,
                timeRange: newSvc.type === 'è£œè‰²' ? newSvc.timeRange : null,
                price: Number(newSvc.price),
                duration: Number(newSvc.duration),
                order: maxOrder + 1
            });
            alert('æœå‹™å·²æ–°å¢');
        };

        const initV28Data = async () => {
            if(!confirm('é€™å°‡æœƒå»ºç«‹ V28 é è¨­è³‡æ–™ï¼Œç¢ºå®šå—ï¼Ÿ')) return;
            const batch = db.batch();
            
            const sCol = db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('services');
            
            const samples = [
                { category: 'éœ§çœ‰', type: 'é¦–æ¬¡', price: 4800, duration: 120 },
                // éœ§çœ‰ç¬¬ä¸€æ¬¡è£œè‰²
                { category: 'éœ§çœ‰', type: 'è£œè‰²', session: 'ç¬¬ä¸€æ¬¡å›è£œ', timeRange: 'é¦–æ¬¡åŠå¹´è£œè‰²', price: 1000, duration: 90 },
                { category: 'éœ§çœ‰', type: 'è£œè‰²', session: 'ç¬¬ä¸€æ¬¡å›è£œ', timeRange: '6-8å€‹æœˆè£œè‰²', price: 1700, duration: 90 },
                { category: 'éœ§çœ‰', type: 'è£œè‰²', session: 'ç¬¬ä¸€æ¬¡å›è£œ', timeRange: '8-12å€‹æœˆè£œè‰²', price: 2700, duration: 90 },
                { category: 'éœ§çœ‰', type: 'è£œè‰²', session: 'ç¬¬ä¸€æ¬¡å›è£œ', timeRange: 'ä¸€å¹´ä»¥ä¸Šè£œè‰²', price: 3300, duration: 90 },
                // éœ§çœ‰ç¬¬äºŒæ¬¡è£œè‰²
                { category: 'éœ§çœ‰', type: 'è£œè‰²', session: 'ç¬¬äºŒæ¬¡ä»¥ä¸Š', timeRange: '4å€‹æœˆå…§è£œè‰²', price: 900, duration: 90 },
                { category: 'éœ§çœ‰', type: 'è£œè‰²', session: 'ç¬¬äºŒæ¬¡ä»¥ä¸Š', timeRange: '4-8å€‹æœˆè£œè‰²', price: 1500, duration: 90 },
                { category: 'éœ§çœ‰', type: 'è£œè‰²', session: 'ç¬¬äºŒæ¬¡ä»¥ä¸Š', timeRange: '8-12å€‹æœˆè£œè‰²', price: 2500, duration: 90 },
                { category: 'éœ§çœ‰', type: 'è£œè‰²', session: 'ç¬¬äºŒæ¬¡ä»¥ä¸Š', timeRange: 'ä¸€å¹´ä»¥ä¸Šè£œè‰²', price: 3000, duration: 90 },
                // éœ§å”‡
                { category: 'éœ§å”‡', type: 'é¦–æ¬¡', price: 5200, duration: 150 },
                // éœ§å”‡ç¬¬ä¸€æ¬¡
                { category: 'éœ§å”‡', type: 'è£œè‰²', session: 'ç¬¬ä¸€æ¬¡å›è£œ', timeRange: '3å€‹æœˆå…§è£œè‰²', price: 0, duration: 120 },
                { category: 'éœ§å”‡', type: 'è£œè‰²', session: 'ç¬¬ä¸€æ¬¡å›è£œ', timeRange: '4-6å€‹æœˆè£œè‰²', price: 1000, duration: 120 },
                { category: 'éœ§å”‡', type: 'è£œè‰²', session: 'ç¬¬ä¸€æ¬¡å›è£œ', timeRange: '6-12å€‹æœˆè£œè‰²', price: 2500, duration: 120 },
                { category: 'éœ§å”‡', type: 'è£œè‰²', session: 'ç¬¬ä¸€æ¬¡å›è£œ', timeRange: 'ä¸€å¹´ä»¥ä¸Šè£œè‰²', price: 4000, duration: 120 },
                // éœ§å”‡ç¬¬äºŒæ¬¡
                 { category: 'éœ§å”‡', type: 'è£œè‰²', session: 'ç¬¬äºŒæ¬¡ä»¥ä¸Š', timeRange: 'åŠå¹´å…§è£œè‰²', price: 1200, duration: 120 },
                 { category: 'éœ§å”‡', type: 'è£œè‰²', session: 'ç¬¬äºŒæ¬¡ä»¥ä¸Š', timeRange: 'ä¸€å¹´å…§è£œè‰²', price: 2000, duration: 120 },
                 { category: 'éœ§å”‡', type: 'è£œè‰²', session: 'ç¬¬äºŒæ¬¡ä»¥ä¸Š', timeRange: 'ä¸€å¹´ä»¥ä¸Šè£œè‰²', price: 3500, duration: 120 },
            ];

            samples.forEach((s, i) => {
                const ref = sCol.doc();
                let fname = `${s.category} - ${s.type}`;
                if(s.type==='è£œè‰²') fname += ` (${s.session} - ${s.timeRange})`;
                batch.set(ref, { ...s, name: fname, order: i });
            });

            const dCol = db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('discounts');
            const dSamples = [{ name: 'é†«è­·äººå“¡', amount: 200 }, { name: 'å­¸ç”Ÿ', amount: 200 }, { name: 'è»å…¬æ•™', amount: 200 }, { name: 'èˆŠå®¢æ¨è–¦', amount: 200 }, { name: 'ç•¶æœˆå£½æ˜Ÿ', amount: 200 }];
            dSamples.forEach(d => { const ref = dCol.doc(); batch.set(ref, d); });

            await batch.commit();
            alert('åƒ¹ç›®è¡¨ç¯„æœ¬å·²åŒ¯å…¥ï¼');
        };
        
        const addDiscount = async () => {
            if(!newDiscName) return;
            await db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('discounts').add({ name: newDiscName, amount: Number(newDiscAmount) });
            setNewDiscName('');
        };

        const renderCalendar = (locId) => {
            const today = new Date(); const year = today.getFullYear(); const month = today.getMonth();
            const days = new Date(year, month+1, 0).getDate(); const start = new Date(year, month, 1).getDay();
            const selected = new Set(editDates[locId].split(',')); const specialMap = settings[locId]?.specialRules || {};
            return (
                <div className="bg-white p-4 rounded-xl border shadow-sm"><div className="text-center mb-2 font-bold">{year}å¹´ {month+1}æœˆ</div><div className="grid grid-cols-7 gap-2 text-center text-xs">{Array.from({length:start}).map((_,i)=><div key={'e'+i}/>)}{Array.from({length:days}).map((_,i)=>{const dStr = `${year}-${String(month+1).padStart(2,'0')}-${String(i+1).padStart(2,'0')}`;const hasRule = specialMap[dStr];return (<div key={dStr} onClick={()=>handleDateClick(locId, dStr)} className={`aspect-square flex items-center justify-center rounded-lg cursor-pointer border ${selected.has(dStr)?'bg-[#8d6e63] text-white': hasRule ? 'border-orange-400 bg-orange-50 text-orange-700 date-cell has-rule' : 'border-gray-100 hover:bg-gray-50'}`}>{i+1}</div>)})}</div></div>
            )
        };
        
        const filteredBooks = books.filter(b => {
            if (filterStatus === 'all') return true;
            if (filterStatus === 'pending') return b.status === 'pending';
            if (filterStatus === 'verifying') return b.paymentStatus === 'reported';
            if (filterStatus === 'paid') return b.paymentStatus === 'verified';
            if (filterStatus === 'cancelled') return b.status === 'cancelled';
            return true;
        });

        const sortedServices = [...services].sort((a, b) => (a.order || 999) - (b.order || 999));

        return (
            <div className="min-h-screen bg-gray-50 p-4">
                <div className="bg-white p-4 sticky top-0 border-b flex justify-between items-center shadow-sm mb-4 z-20">
                    <h2 className="font-bold">å¾Œå°ç®¡ç† (V28)</h2>
                    <button onClick={onBack} className="text-sm bg-gray-100 px-3 py-1 rounded">é›¢é–‹</button>
                </div>
                
                <div className="flex gap-2 mb-4 overflow-x-auto pb-2">
                    <button onClick={()=>setTab('book')} className={`px-4 py-2 rounded whitespace-nowrap ${tab==='book'?'bg-[#8d6e63] text-white':'bg-white'}`}>é ç´„</button>
                    <button onClick={()=>setTab('svc')} className={`px-4 py-2 rounded whitespace-nowrap ${tab==='svc'?'bg-[#8d6e63] text-white':'bg-white'}`}>æœå‹™</button>
                    <button onClick={()=>setTab('set')} className={`px-4 py-2 rounded whitespace-nowrap ${tab==='set'?'bg-[#8d6e63] text-white':'bg-white'}`}>ç‡Ÿæ¥­</button>
                    <button onClick={()=>setTab('disc')} className={`px-4 py-2 rounded whitespace-nowrap ${tab==='disc'?'bg-[#8d6e63] text-white':'bg-white'}`}>æŠ˜æ‰£</button>
                    <button onClick={()=>setTab('msg')} className={`px-4 py-2 rounded whitespace-nowrap ${tab==='msg'?'bg-[#8d6e63] text-white':'bg-white'}`}>è¨Šæ¯</button>
                </div>

                {tab === 'book' && (
                    <div>
                         <div className="flex gap-2 mb-4 overflow-x-auto">
                            {[
                                {id:'all', label:'å…¨éƒ¨'},
                                {id:'pending', label:'å¾…ç¢ºèª'},
                                {id:'verifying', label:'å¾…æ ¸å¸³'},
                                {id:'paid', label:'å·²ç¢ºèª'},
                                {id:'cancelled', label:'å·²å–æ¶ˆ'}
                            ].map(f => (
                                <button key={f.id} onClick={()=>setFilterStatus(f.id)} 
                                    className={`status-tab ${filterStatus===f.id ? 'active' : 'inactive'}`}>
                                    {f.label}
                                </button>
                            ))}
                         </div>
                        <div className="space-y-4">
                            {filteredBooks.map(b => (
                                <div key={b.id} className="bg-white p-4 rounded-xl shadow-sm border border-gray-100 text-sm">
                                    <div className="flex justify-between mb-2">
                                        <div className="font-bold text-lg text-[#8d6e63]">{b.date} {b.time}</div>
                                        <div className={`px-2 py-1 rounded text-xs ${b.status==='confirmed'?'bg-green-100 text-green-700':b.status==='cancelled'?'bg-red-100 text-red-700':'bg-yellow-100 text-yellow-700'}`}>{b.status==='confirmed'?'å·²ç¢ºèª':b.status==='cancelled'?'å·²å–æ¶ˆ':'å¾…ç¢ºèª'}</div>
                                    </div>
                                    <div className="space-y-1 text-gray-600">
                                        <div>{b.locationName}ãƒ»{b.serviceName} {b.guestIndex && `(ç¬¬${b.guestIndex}ä½)`}</div>
                                        <div>{b.customerName} ({b.customerPhone})</div>
                                        <div className="text-[#8d6e63] font-bold">ç¸½é¡ï¼š${b.totalPrice}</div>
                                        {b.paymentStatus === 'reported' && <div className="text-blue-600 font-bold bg-blue-50 p-2 rounded">ğŸ’° é¡§å®¢å·²åŒ¯æ¬¾ï¼šå¾Œäº”ç¢¼ {b.paymentInfo?.last5}</div>}
                                        {b.paymentStatus === 'verified' && <div className="text-green-600 font-bold">ğŸ’° è¨‚é‡‘å·²ç¢ºèª</div>}
                                    </div>
                                    <div className="flex gap-2 mt-3 pt-3 border-t">
                                        <button onClick={()=>setMsgModal(b)} className="flex-1 bg-gray-100 py-2 rounded flex items-center justify-center gap-1"><Icon path={Icons.msg} size={16}/> å‚³è¨Š</button>
                                        <button onClick={()=>db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('bookings').doc(b.id).update({status: 'confirmed'})} className="flex-1 bg-green-50 text-green-700 border border-green-200 py-2 rounded">ç¢ºèª</button>
                                        <button onClick={()=>db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('bookings').doc(b.id).update({paymentStatus: 'verified'})} className="flex-1 bg-blue-50 text-blue-700 border border-blue-200 py-2 rounded">æ”¶è¨‚</button>
                                        <button onClick={()=>db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('bookings').doc(b.id).update({status: 'cancelled'})} className="px-3 text-red-400 border border-red-200 rounded">âŒ</button>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                )}

                {tab === 'svc' && (
                    <div className="space-y-6">
                        <div className="bg-white p-4 rounded-xl shadow-sm border">
                            <div className="flex justify-between items-center mb-4">
                                <h3 className="font-bold text-[#4e342e]">æ–°å¢æœå‹™</h3>
                                <button onClick={initV28Data} className="text-xs text-blue-500 underline">âš¡ åŒ¯å…¥ V28 é è¨­è³‡æ–™</button>
                            </div>
                            <div className="space-y-3 text-sm">
                                <div>
                                    <label className="block text-xs text-gray-500 mb-1">å¤§åˆ†é¡</label>
                                    <select className="w-full border p-2 rounded" value={newSvc.cat} onChange={e=>setNewSvc({...newSvc, cat:e.target.value})}>
                                        {MAIN_CATS.map(c=><option key={c} value={c}>{c}</option>)}
                                    </select>
                                </div>
                                <div>
                                    <label className="block text-xs text-gray-500 mb-1">é¡å‹</label>
                                    <select className="w-full border p-2 rounded" value={newSvc.type} onChange={e=>setNewSvc({...newSvc, type:e.target.value})}>
                                        {SUB_CATS.map(c=><option key={c} value={c}>{c}</option>)}
                                    </select>
                                </div>
                                {newSvc.type === 'è£œè‰²' && (
                                    <div className="space-y-3 p-3 bg-gray-50 rounded border">
                                        <div>
                                            <label className="block text-xs text-gray-500 mb-1">å›è£œæ¬¡æ•¸</label>
                                            <select className="w-full border p-2 rounded" value={newSvc.session} onChange={e=>setNewSvc({...newSvc, session:e.target.value})}>
                                                {TOUCHUP_SESSIONS.map(c=><option key={c} value={c}>{c}</option>)}
                                            </select>
                                        </div>
                                        <div>
                                            <label className="block text-xs text-gray-500 mb-1">æ™‚é–“å€é–“ (é¡¯ç¤ºåç¨±)</label>
                                            <input className="w-full border p-2 rounded" placeholder="ä¾‹å¦‚ï¼š6å€‹æœˆå…§è£œè‰²" value={newSvc.timeRange} onChange={e=>setNewSvc({...newSvc, timeRange:e.target.value})}/>
                                        </div>
                                    </div>
                                )}
                                <div className="flex gap-2">
                                    <div className="flex-1">
                                        <label className="block text-xs text-gray-500 mb-1">åƒ¹æ ¼</label>
                                        <input type="number" className="w-full border p-2 rounded" placeholder="$" value={newSvc.price} onChange={e=>setNewSvc({...newSvc, price:e.target.value})}/>
                                    </div>
                                    <div className="w-24">
                                        <label className="block text-xs text-gray-500 mb-1">åˆ†é˜</label>
                                        <input type="number" className="w-full border p-2 rounded" placeholder="min" value={newSvc.duration} onChange={e=>setNewSvc({...newSvc, duration:e.target.value})}/>
                                    </div>
                                </div>
                                <button onClick={submitSvcV26} className="w-full bg-[#8d6e63] text-white py-2 rounded">æ–°å¢æœå‹™</button>
                            </div>

                            <div className="mt-6 border-t pt-4">
                                <h4 className="font-bold text-sm text-gray-500 mb-2">ç¾æœ‰æœå‹™åˆ—è¡¨</h4>
                                <div className="space-y-2">
                                    {sortedServices.map((s, idx)=>(
                                        <div key={s.id} className="flex justify-between items-center p-2 border rounded bg-gray-50 text-sm">
                                            <span>{s.name} (${s.price})</span>
                                            <div className="flex gap-2">
                                                <button onClick={()=>moveService(idx, 'up')} className="text-gray-400 hover:text-gray-600 disabled:opacity-20" disabled={idx===0}><Icon path={Icons.up} size={16}/></button>
                                                <button onClick={()=>moveService(idx, 'down')} className="text-gray-400 hover:text-gray-600 disabled:opacity-20" disabled={idx===sortedServices.length-1}><Icon path={Icons.down} size={16}/></button>
                                                <button onClick={()=>db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('services').doc(s.id).delete()} className="text-red-400 ml-2"><Icon path={Icons.trash} size={14}/></button>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                )}
                
                {tab === 'disc' && (
                    <div className="space-y-6">
                        <div className="bg-white p-4 rounded-xl shadow-sm border">
                            <h3 className="font-bold text-[#4e342e] mb-4">å„ªæƒ èº«ä»½ç®¡ç†</h3>
                            <div className="flex gap-2 mb-4">
                                <input className="flex-1 border p-2 rounded" placeholder="èº«ä»½åç¨± (å¦‚: å­¸ç”Ÿ)" value={newDiscName} onChange={e=>setNewDiscName(e.target.value)}/>
                                <input className="w-24 border p-2 rounded" type="number" placeholder="æŠ˜æŠµé¡" value={newDiscAmount} onChange={e=>setNewDiscAmount(e.target.value)}/>
                                <button onClick={addDiscount} className="bg-[#8d6e63] text-white px-4 rounded">æ–°å¢</button>
                            </div>
                            <div className="space-y-2">
                                {discounts.map(d => (
                                    <div key={d.id} className="flex justify-between p-3 border rounded bg-gray-50">
                                        <span>{d.name} (æŠ˜æŠµ ${d.amount})</span>
                                        <button onClick={()=>db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('discounts').doc(d.id).delete()} className="text-red-400"><Icon path={Icons.trash}/></button>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                )}
            </div>
        );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
